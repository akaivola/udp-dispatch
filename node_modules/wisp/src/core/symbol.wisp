(ns wisp.core.symbol
  (:require [wisp.interface.symbol :refer [ISymbol]]
            [wisp.type.symbol :refer [Symbol symbol?]]
            [wisp.core.string :refer [str string?]]))


(defn symbol
  ([x] (if (symbol? x)
         x
         (symbol nil x)))
  ([ns name]
   (Symbol. nil
            ns
            name
            (if (string? ns)
              (str ns "/" name)
              name)
            nil)))

(def ^:private **gensym-id**)
(defn gensym
  "Returns a new symbol with a unique name. If a prefix string is
  supplied, the name is prefix# where # is some unique number. If
  prefix is not supplied, the prefix is 'G__'."
  ([] (gensym "G__"))
  ([prefix]
   (set! **gensym-id** (inc **gensym-id**))
   (symbol (str prefix **gensym-id**))))
